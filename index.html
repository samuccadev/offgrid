<!DOCTYPE html><html lang="pt-BR"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="theme-color" content="#0d6efd"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="apple-mobile-web-app-title" content="Calculadora Solar"><meta name="msapplication-TileColor" content="#0d6efd"><title>Calculadora de Energia Solar Offgrid</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"><link rel="manifest" href="manifest.json"><link rel="stylesheet" href="style.min.css"><style>.pdf-template{display:none;width:210mm;min-height:297mm;padding:15mm;margin:0 auto;background-color:#fff;box-shadow:0 0 10px rgba(0,0,0,.1)}.pdf-header{text-align:center;margin-bottom:20px;border-bottom:2px solid #0d6efd;padding-bottom:15px}.pdf-logo{font-size:2.5rem;color:#0d6efd;margin-bottom:10px}.pdf-section{margin-bottom:20px}.pdf-section-title{font-size:1.2rem;color:#0d6efd;border-bottom:1px solid #dee2e6;padding-bottom:8px;margin-bottom:15px}.pdf-table{width:100%;border-collapse:collapse}.pdf-table th{background-color:#f8f9fa;text-align:left;padding:8px;border-bottom:2px solid #dee2e6}.pdf-table td{padding:8px;border-bottom:1px solid #dee2e6}.pdf-table tfoot{font-weight:700;background-color:#e9ecef}.pdf-card{border:1px solid #dee2e6;border-radius:5px;padding:15px;margin-bottom:15px;background-color:#f8f9fa}.pdf-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:15px}@media screen{.pdf-template{display:none}}</style></head><body><div id="welcomeScreen" class="container py-5 text-center"><i class="fas fa-solar-panel text-warning fs-1"></i><h1 class="mt-3">Calculadora de Energia Solar Offgrid</h1><p class="lead">Bem-vindo ao sistema de cálculo de energia solar</p><div class="d-flex flex-column flex-sm-row justify-content-center gap-2 mt-4"><button class="btn btn-primary btn-lg" onclick="startNewCalculation()"><i class="fas fa-plus me-2"></i> Novo Cálculo</button> <button class="btn btn-outline-primary btn-lg" onclick="showSavedLists()"><i class="fas fa-folder-open me-2"></i> Carregar Lista Salva</button></div><div id="savedListsContainer" class="mt-4 mx-auto" style="max-width:500px;display:none"><h4 class="mb-3">Listas Salvas</h4><div id="savedLists"></div><button class="btn btn-secondary mt-3 w-100" onclick="hideSavedLists()"><i class="fas fa-arrow-left me-2"></i> Voltar</button></div></div><div id="appContent" class="container py-4" style="display:none"><h1 class="text-center mb-4 d-none d-md-block"><i class="fas fa-solar-panel text-warning me-2"></i>Calculadora de Energia Solar Offgrid</h1><ul class="nav nav-tabs mb-4 d-none d-md-flex" id="myTab" role="tablist"><li class="nav-item" role="presentation"><button class="nav-link active" id="appliances-tab" data-bs-toggle="tab" data-bs-target="#appliances" type="button" role="tab"><i class="fas fa-plug me-1"></i> Aparelhos</button></li><li class="nav-item" role="presentation"><button class="nav-link" id="config-tab" data-bs-toggle="tab" data-bs-target="#config" type="button" role="tab"><i class="fas fa-cog me-1"></i> Configurações</button></li><li class="nav-item" role="presentation"><button class="nav-link" id="results-tab" data-bs-toggle="tab" data-bs-target="#results" type="button" role="tab"><i class="fas fa-chart-pie me-1"></i> Resumo</button></li></ul><div class="tab-content" id="myTabContent"><div class="tab-pane fade show active" id="appliances" role="tabpanel"><div class="d-flex flex-column flex-md-row justify-content-between mb-4 gap-2"><div class="d-flex flex-wrap gap-2"><button class="btn btn-info" onclick="gerarPDF()"><i class="fas fa-print me-1"></i> Gerar PDF</button> <button class="btn btn-secondary" onclick="showWelcomeScreen()"><i class="fas fa-home me-1"></i> Início</button></div><div><span class="badge bg-secondary" id="totalConsumption">0 Wh/dia</span></div></div><div class="card mb-4"><div class="card-header"><h5 class="mb-0"><i class="fas fa-plug me-2"></i>Adicionar Aparelhos</h5></div><div class="card-body"><form id="applianceForm"><input type="hidden" id="editIndex" value="-1"><div class="row g-3"><div class="col-12 col-md-4"><label class="form-label required">Nome do Aparelho</label> <input type="text" class="form-control" id="applianceName" placeholder="Ex: Geladeira" required></div><div class="col-6 col-md-2"><label class="form-label required">Quantidade</label> <input type="number" class="form-control" id="quantity" min="1" value="1" required></div><div class="col-6 col-md-2"><label class="form-label required">Potência (W)</label> <input type="number" class="form-control" id="power" placeholder="Ex: 150" required></div><div class="col-6 col-md-2"><label class="form-label required">Horas/Dia</label> <input type="number" step="0.1" class="form-control" id="hours" placeholder="Ex: 8" required></div><div class="col-6 col-md-2 d-grid"><button id="submitButton" type="submit" class="btn btn-primary"><i class="fas fa-plus me-1"></i> Adicionar</button></div></div></form></div></div><div class="card mb-4 d-none d-md-block"><div class="card-header d-flex justify-content-between align-items-center"><h5 class="mb-0"><i class="fas fa-table me-2"></i>Aparelhos Adicionados</h5><span class="badge bg-primary">Total: <span id="totalAparelhos">0</span> aparelhos</span></div><div class="table-responsive"><table class="table table-striped table-hover mb-0"><thead><tr><th>Aparelho</th><th>Quant</th><th>Pot (W)</th><th>Horas</th><th>Consumo (Wh/dia)</th><th>Correção (CC → CA)</th><th>Ações</th></tr></thead><tbody id="appliancesList"></tbody><tfoot><tr class="table-primary"><td colspan="4" class="fw-bold">Total</td><td class="fw-bold" id="totalConsumo">0.00</td><td class="fw-bold" id="totalConsumoCorrigido">0.00</td><td></td></tr></tfoot></table></div></div><div class="d-block d-md-none"><div class="card mb-5"><div class="card-header d-flex justify-content-between align-items-center"><h5 class="mb-0"><i class="fas fa-table me-2"></i>Aparelhos Adicionados</h5><span class="badge bg-primary">Total: <span id="totalAparelhosMobile">0</span> aparelhos</span></div><div class="card-body p-3" id="appliancesCardsList"></div><div class="p-3 fw-bold border-top"><div class="d-flex justify-content-between"><span>Total:</span> <span id="totalKwhMobile">0.00 Wh/dia</span></div><div class="d-flex justify-content-between mt-1 text-primary"><span>Correção (CC → CA):</span> <span id="totalKwhMobileCorrigido">0.00 Wh/dia</span></div></div></div></div></div><div class="tab-pane fade" id="config" role="tabpanel" style="padding-bottom:3em"><div class="d-flex flex-column flex-md-row justify-content-between mb-4 gap-2"><div class="d-flex flex-wrap gap-2"><button class="btn btn-secondary" onclick="showWelcomeScreen()"><i class="fas fa-home me-1"></i> Início</button></div><div><span class="badge bg-secondary" id="totalConsumptionConfig">0 Wh/dia</span></div></div><div class="card mb-4"><div class="card-header"><h5 class="mb-0"><i class="fas fa-cog me-2"></i>Configurações do Sistema</h5></div><div class="card-body"><h6 class="fw-bold mb-2">⚡ Bateria</h6><div class="row g-3"><div class="col-12 col-md-4"><label for="autonomy" class="form-label required">Autonomia (dias)</label> <input type="number" class="form-control" id="autonomy" min="1" value="2" required></div><div class="col-12 col-md-4"><label for="systemVoltage" class="form-label required">Tensão do Sistema (V)</label> <select class="form-select" id="systemVoltage" required><option value="12">12V</option><option value="24" selected="selected">24V</option><option value="48">48V</option></select></div><div class="col-12 col-md-4"><label for="batteryUnitCapacity" class="form-label required">Capacidade da Bateria (Ah)</label> <input type="number" class="form-control" id="batteryUnitCapacity" min="1" value="100" required></div></div><div class="row g-3"><div class="col-12 col-md-6"><label for="dischargeDepth" class="form-label required">Profundidade de Descarga (%)</label> <input type="number" class="form-control" id="dischargeDepth" min="1" max="100" value="50" required></div><div class="col-12 col-md-6"><label for="batteryEfficiency" class="form-label required">Eficiência da Bateria (%)</label> <input type="number" class="form-control" id="batteryEfficiency" min="1" max="100" value="85" required></div></div><h6 class="fw-bold mt-3">☀️ Placa Solar</h6><div class="row g-3"><div class="col-12 col-md-12"><label for="panelPower" class="form-label required">Potência da Placa Solar (W)</label> <input type="number" class="form-control" id="panelPower" min="1" value="330" required></div></div><h6 class="fw-bold mt-3">⚙️ Outros</h6><div class="row g-3"><div class="col-12 col-md-6"><label for="systemLosses" class="form-label">Perdas do Sistema (%)</label> <input type="number" id="systemLosses" class="form-control" min="0" max="50" value="10" step="1"></div><div class="col-12 col-md-6"><label for="sunHours" class="form-label required">Horas de Sol pleno/dia</label> <input type="number" class="form-control" id="sunHours" min="0.1" step="0.1" value="5" required></div></div><button id="calculateBtn" class="btn btn-success w-100 mt-4"><i class="fas fa-bolt me-1"></i> Calcular Sistema</button></div></div></div><div class="tab-pane fade mt-3" id="results" role="tabpanel"><div class="d-flex flex-column flex-md-row justify-content-between mb-4 gap-2"><div class="d-flex flex-wrap gap-2"><button class="btn btn-secondary" onclick="showWelcomeScreen()"><i class="fas fa-home me-1"></i> Início</button></div><div><span class="badge bg-secondary" id="totalConsumptionResults">0 Wh/dia</span></div></div><div class="card shadow-sm border-0 mb-4"><div class="card-header bg-light"><h5 class="mb-0 text-dark"><i class="fas fa-solar-panel me-2" style="color:orange"></i> Resumo do Sistema Solar</h5></div><div class="card-body"><div class="row text-center g-4"><div class="col-6 col-md-3"><h6 class="text-muted">Consumo Total</h6><h4 class="fw-bold text-success" id="totalDailyConsumption">0.00 Wh/dia</h4></div><div class="col-6 col-md-3"><h6 class="text-muted">Geração Necessária</h6><h4 class="fw-bold text-primary" id="geracaoNecessaria">0.00 Wh/dia</h4></div><div class="col-6 col-md-3"><h6 class="text-muted">Placas Necessárias</h6><h4 class="fw-bold text-danger" id="solarPanels">0 unid.</h4></div><div class="col-6 col-md-3"><h6 class="text-muted">Controlador de Carga</h6><h4 class="fw-bold text-warning" id="chargeController">0 A</h4></div></div><div class="mt-4"><p class="mb-1 small">☀️ Considerando <strong><span id="sunHoursValue">5</span></strong> horas de sol pleno por dia e placas de <strong><span id="panelPowerValue">330</span>W</strong></p><p class="mb-1 small">⚡ Perdas do sistema: <strong><span id="systemLossPercent">15</span>%</strong></p><p class="mb-0 small">🧮 Total de placas calculadas: <strong><span id="placaNecessarias">0</span></strong></p></div><div class="alert alert-warning mt-4 mb-0 border-0" style="background-color:#fff8e5;color:#8a6d3b"><i class="fas fa-exclamation-triangle me-2"></i> Valores fracionados de placas serão <strong>arredondados para cima</strong>.</div></div></div><div class="card shadow-sm mb-4"><div class="card-header bg-light"><h5 class="mb-0 text-dark"><i class="fas fa-battery-full me-2" style="color:#28a745"></i> Sistema de Armazenamento</h5></div><div class="card-body"><div class="row text-center g-3 mb-3"><div class="col-6 col-md-3"><div class="border rounded p-2 bg-light"><h6 class="text-muted mb-1">Configuração</h6><h4 class="text-warning mb-0" id="batteryConfig">0s0p</h4><small class="text-muted" id="batteryConfigDetail">0V × 0Ah</small></div></div><div class="col-6 col-md-3"><div class="border rounded p-2 bg-light"><h6 class="text-muted mb-1">Capacidade Total</h6><h4 class="text-success mb-0" id="batteryCapacity">0.00 Ah</h4><small class="text-muted" id="batteryCapacityWh">0 Wh</small></div></div><div class="col-6 col-md-3"><div class="border rounded p-2 bg-light"><h6 class="text-muted mb-1">Quantidade</h6><h4 class="text-danger mb-0" id="quantidadeBaterias">0 unidades</h4><small class="text-muted" id="batteryUnitInfo">200Ah cada</small></div></div><div class="col-6 col-md-3"><div class="border rounded p-2 bg-light"><h6 class="text-muted mb-1">Autonomia</h6><h4 class="text-warning mb-0" id="batteryAutonomy">0.0 dias</h4><small class="text-muted" id="autonomyHours">0 horas</small></div></div></div><div class="row g-2 mb-3"><div class="col-12 col-md-6 col-lg-3"><div class="d-flex align-items-center p-2 border rounded bg-light"><i class="fas fa-bolt me-2 text-warning"></i> <small><strong>Tensão do Sistema:</strong> <span id="tensaoSistema">24</span> V</small></div></div><div class="col-12 col-md-6 col-lg-3"><div class="d-flex align-items-center p-2 border rounded bg-light"><i class="fas fa-tint me-2 text-danger"></i> <small><strong>Profundidade de Descarga:</strong> <span id="dischargePercent">50</span>%</small></div></div><div class="col-12 col-md-6 col-lg-3"><div class="d-flex align-items-center p-2 border rounded bg-light"><i class="fas fa-calendar-day me-2 text-success"></i> <small><strong>Autonomia planejada:</strong> <span id="autonomyDays">2</span> dias</small></div></div></div><div class="alert alert-warning mb-2 border-0" style="background-color:#fff8e5;color:#8a6d3b"><div class="d-flex"><i class="fas fa-info-circle me-2 mt-1"></i><div><strong>Configuração:</strong> <span id="batteryConfigExplanation" class="d-block">0 baterias em série × 0 em paralelo</span></div></div></div><div class="alert alert-warning mb-0 border-0" style="background-color:#fff8e5;color:#8a6d3b"><div class="d-flex"><i class="fas fa-exclamation-circle me-2 mt-1"></i><div><strong>Observação:</strong> <span class="d-block">Cálculo considera baterias de <span id="batteryUnitCapacityText">200</span>Ah. Ajuste conforme a capacidade disponível no mercado.</span></div></div></div></div></div><div id="voltageRecommendation"></div><div class="card border mb-4 shadow-sm" id="chargeControllerCard" style="padding-bottom:2em"><div class="card-header bg-light text-dark border-bottom"><h5 class="mb-0"><i class="fas fa-plug me-2" style="color:orange"></i> Controlador de Carga e Fiação</h5></div><div class="card-body"><p class="mb-2"><strong>Corrente necessária do controlador:</strong> <span id="calculatedControllerCurrent">0 A</span></p><div class="mb-3"><strong>Controladores disponíveis:</strong><ul id="availableControllers" class="list-group list-group-flush mt-1"></ul></div><div><strong>Bitola recomendada do fio:</strong><ul id="wireGauge" class="list-group list-group-flush mt-1"></ul></div></div></div><div id="solarWiringPlan"></div></div></div><div class="d-block d-md-none fixed-bottom bg-light border-top py-2 mt-3"><div class="d-flex justify-content-around"><button class="btn btn-link text-center" onclick='showTab("appliances")'><i class="fas fa-plug d-block"></i><small>Aparelhos</small></button> <button class="btn btn-link text-center" onclick='showTab("config")'><i class="fas fa-cog d-block"></i><small>Configurações</small></button> <button class="btn btn-link text-center" onclick='showTab("results")'><i class="fas fa-chart-pie d-block"></i><small>Resumo</small></button></div></div></div><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script><script src="script.min.js"></script></body></html>